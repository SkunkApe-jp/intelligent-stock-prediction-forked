flowchart LR
    %% External Entities
    User[["User"]]
    Admin[["Admin"]]
    MarketData[["Market Data APIs"]]

    %% Processes
    P1["P1: Authentication"]
    P2["P2: Portfolio Management"]
    P3["P3: Prediction Engine"]
    P4["P4: Sentiment Analysis"]
    P5["P5: Admin Monitoring"]

    %% Data Stores
    DS_User[("D1: User DB")]
    DS_Company[("D2: Company DB")]
    DS_Portfolio[("D3: Portfolio DB")]
    DS_Txn[("D4: Transaction DB")]
    DS_Dividend[("D5: Dividend DB")]

    %% Flows
    User -->|Login/Logout| P1
    P1 -->|User details| DS_User
    P1 -->|Auth result| User

    User -->|Trade / Dividend Requests| P2
    P2 -->|Portfolio updates| DS_Portfolio
    P2 -->|Transactions| DS_Txn
    P2 -->|Dividends| DS_Dividend
    P2 -->|Dashboard views| User

    P2 -->|Symbol & history request| P3
    P3 -->|Historical data & predictions| P2

    P3 -->|Price/News requests| MarketData
    MarketData -->|Price/News data| P3

    P3 -->|News text| P4
    P4 -->|Sentiment scores| P3

    Admin -->|Monitoring requests| P5
    P5 -->|Aggregated stats| Admin

    P5 --> DS_User
    P5 --> DS_Company
    P5 --> DS_Portfolio
    P5 --> DS_Txn
    P5 --> DS_Dividend